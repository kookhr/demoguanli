# 环境管理中心

一个用于管理和快速访问多套软件环境的Web应用，支持内外网环境区分和可用性检测。

## 功能特性

### 🌐 环境管理
- **多环境支持**: 开发、测试、预生产、生产、演示等环境
- **内外网区分**: 自动检测当前网络环境，区分内网和外网访问
- **状态监控**: 实时检测环境可用性状态（在线/离线/维护中）
- **版本信息**: 显示各环境的版本号和最后部署时间

### 🔍 搜索与过滤
- **智能搜索**: 支持按环境名称、描述、类型搜索
- **网络过滤**: 按内网/外网环境过滤
- **状态过滤**: 按在线/离线/维护状态过滤

### 📊 统计信息
- 总环境数量统计
- 在线环境数量统计
- 内网/外网环境分布统计

### 🚀 快速访问
- **一键访问**: 快速跳转到目标环境
- **网络检测**: 自动判断当前网络是否可访问目标环境
- **服务详情**: 展开查看各环境的具体服务列表

### ⚙️ 配置管理
- **在线编辑**: 通过Web界面添加、编辑、删除环境配置
- **实时生效**: 配置修改后立即生效，无需重启
- **数据持久化**: 配置自动保存到浏览器本地存储
- **导入导出**: 支持配置文件的导入和导出
- **配置验证**: 自动验证配置的完整性和正确性

## 技术栈

- **前端框架**: React 18
- **构建工具**: Vite
- **路由管理**: React Router DOM
- **图标库**: Lucide React
- **样式**: 自定义CSS（类Tailwind风格）
- **数据存储**: LocalStorage

## 快速开始

### 安装依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm run dev
```

访问 http://localhost:5173 查看应用

### 构建生产版本
```bash
npm run build
```

## 配置说明

### 环境配置

编辑 `src/data/environments.js` 文件来配置你的环境信息：

```javascript
{
  id: 'dev',                    // 环境唯一标识
  name: '开发环境',              // 环境显示名称
  type: 'development',          // 环境类型
  network: 'internal',          // 网络类型: internal | external
  url: 'https://dev.example.com', // 主要访问地址
  status: 'online',             // 状态: online | offline | maintenance
  version: 'v1.2.3-dev',       // 版本号
  lastDeployed: '2024-01-15 14:30:00', // 最后部署时间
  description: '开发环境，用于日常开发和调试', // 环境描述
  services: [                   // 服务列表
    { name: 'Web应用', url: 'https://dev.example.com', port: 3000 },
    { name: 'API服务', url: 'https://api-dev.example.com', port: 8080 }
  ]
}
```

### 环境类型说明

- `development`: 开发环境（绿色标识）
- `testing`: 测试环境（蓝色标识）
- `staging`: 预生产环境（橙色标识）
- `production`: 生产环境（红色标识）
- `demo`: 演示环境（灰色标识）

### 网络类型说明

- `internal`: 内网环境，只能在内网访问
- `external`: 外网环境，可以从外网访问

## 功能说明

### 网络检测

应用会自动检测当前网络环境：
- 检测常见内网IP段（192.168.x.x, 10.x.x.x, 172.16-31.x.x）
- 检测localhost和.local域名
- 根据检测结果显示可访问的环境

### 智能状态检测 🚀

系统现在具备真实的环境状态检测功能，不再依赖静态配置：

**多层次检测策略**：
- 主要方法：fetch API HEAD请求
- 备用方法：no-cors模式检测
- 兜底方法：Image对象favicon检测

**智能状态识别**：
- ✅ **在线**: 服务正常响应
- ❌ **离线**: 服务不可访问
- ⏰ **超时**: 响应时间过长
- 🚫 **错误**: 检测过程出错
- 📡 **可达**: 服务器可达但状态未知
- ❓ **未检测**: 尚未进行检测

**性能优化**：
- 30秒智能缓存机制
- 最大3个并发检测
- 8-10秒超时控制
- 实时进度显示

**用户体验**：
- 页面加载时自动后台检测
- 支持单个/批量手动刷新
- 实时状态更新和错误提示
- 详细的检测时间记录

### 响应式设计

- 移动端友好的响应式布局
- 桌面端双列显示，移动端单列显示
- 自适应的统计卡片布局

## 使用说明

### 页面导航

应用包含两个主要页面：

1. **环境管理页面** (`/`)
   - 查看所有环境的状态和信息
   - 快速访问各个环境
   - 搜索和过滤环境
   - 实时状态检测

2. **配置管理页面** (`/config`)
   - 添加新的环境配置
   - 编辑现有环境信息
   - 删除不需要的环境
   - 导入/导出配置文件
   - 重置为默认配置

### 配置管理功能

#### 添加环境
1. 点击"添加环境"按钮
2. 填写环境基本信息（ID、名称、类型等）
3. 配置服务列表
4. 保存配置

#### 编辑环境
1. 在环境列表中点击"编辑"按钮
2. 修改需要更改的信息
3. 保存更改

#### 导入/导出配置
- **导出**: 点击"导出配置"下载JSON格式的配置文件
- **导入**: 点击"导入配置"选择之前导出的配置文件

#### 数据持久化
- 所有配置自动保存到浏览器的LocalStorage
- 配置在浏览器重启后仍然保持
- 支持跨标签页同步

### 📁 项目结构
```
src/
├── components/
│   ├── EnvironmentCard.jsx    # 环境卡片组件
│   ├── EnvironmentList.jsx    # 环境列表组件
│   ├── EnvironmentForm.jsx    # 环境编辑表单
│   ├── ServiceForm.jsx        # 服务编辑组件
│   ├── ConfigPage.jsx         # 配置管理页面
│   └── Navigation.jsx         # 导航组件
├── data/
│   └── environments.js        # 默认环境配置数据
├── utils/
│   ├── networkCheck.js        # 网络检测工具
│   └── configManager.js       # 配置数据管理
├── App.jsx                    # 主应用组件
├── App.css                    # 应用样式
└── index.css                  # 全局样式
```

## 自定义开发

### 添加新的环境类型

1. 在 `src/utils/configManager.js` 的 `validateEnvironment` 函数中添加新的环境类型
2. 在 `src/components/EnvironmentCard.jsx` 的 `getTypeStyle` 函数中添加对应的样式
3. 在 `src/components/EnvironmentForm.jsx` 的 `environmentTypes` 数组中添加新选项

### 修改状态检测逻辑

编辑 `src/utils/networkCheck.js` 中的 `checkEnvironmentStatus` 函数来自定义状态检测逻辑。

### 自定义样式

修改 `src/index.css` 文件来调整应用的视觉样式。

### 扩展配置管理

- 修改 `src/utils/configManager.js` 来添加新的配置验证规则
- 扩展 `src/components/EnvironmentForm.jsx` 来支持更多字段
- 在 `src/components/ServiceForm.jsx` 中添加新的服务类型

## 部署建议

1. **静态部署**: 构建后可部署到任何静态文件服务器
2. **反向代理**: 建议配置反向代理来处理跨域请求
3. **HTTPS**: 生产环境建议使用HTTPS
4. **缓存策略**: 配置适当的缓存策略提升性能

## 界面预览

### 主要特色

✨ **现代化设计**
- 使用 Tailwind CSS 构建的精美界面
- 渐变背景和卡片阴影效果
- 流畅的动画和过渡效果
- 响应式设计，支持移动端

🎨 **视觉亮点**
- 彩色渐变统计卡片
- 环境类型徽章（生产环境红色、测试环境蓝色等）
- 状态指示器（在线绿色、离线红色、维护中黄色）
- 网络类型图标（内网盾牌、外网地球）

🚀 **交互体验**
- 卡片悬停效果
- 按钮点击反馈
- 表单验证提示
- 加载状态动画

### 页面功能

1. **环境管理页面** (`/`)
   - 美观的统计卡片展示
   - 搜索和过滤功能
   - 环境卡片网格布局
   - 服务详情展开功能

2. **配置管理页面** (`/config`)
   - 环境列表表格
   - 添加/编辑环境表单
   - 导入/导出配置功能
   - 删除确认对话框

### 测试环境说明 🧪

系统预置了多种测试环境来演示不同的状态检测效果：

1. **Google 搜索** - 测试正常在线状态 ✅
2. **GitHub** - 测试正常在线状态 ✅
3. **本地开发服务器** - 测试内网环境 🏠
4. **不存在的服务** - 测试离线状态 ❌
5. **超时测试服务** - 测试超时状态 ⏰
6. **错误测试服务** - 测试错误状态 🚫

### 使用建议

1. **首次使用**：访问 http://localhost:5173 查看测试环境
2. **观察检测**：等待自动状态检测完成，观察不同状态效果
3. **手动测试**：点击"检测所有"按钮体验批量检测
4. **配置环境**：点击"配置管理"添加您的实际环境
5. **导出备份**：定期导出配置文件作为备份
6. **自定义样式**：修改 `tailwind.config.js` 中的颜色主题

## 许可证

MIT License
