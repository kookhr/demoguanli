# 🔀 分支对比：Main vs Serv00

## 📋 分支概述

### Main 分支 (Cloudflare 版本)
- 🌐 **部署平台**：Cloudflare Pages + Workers
- 🗄️ **数据存储**：Cloudflare KV
- 🔧 **后端**：Cloudflare Workers (Serverless)
- 💰 **成本**：免费额度有限，超出需付费

### Serv00 分支 (数据库版本)
- 🌐 **部署平台**：Serv00 免费主机
- 🗄️ **数据存储**：MySQL/PostgreSQL 数据库
- 🔧 **后端**：PHP + Apache/Nginx
- 💰 **成本**：完全免费

## 🎯 功能对比

| 功能特性 | Main 分支 | Serv00 分支 | 说明 |
|---------|-----------|-------------|------|
| 环境管理 | ✅ | ✅ | 完全相同 |
| 状态检测 | ✅ | ✅ | 完全相同 |
| 状态历史 | ✅ | ✅ | 数据库版本更强大 |
| 用户管理 | ✅ | ✅ | 数据库版本更完善 |
| 标签管理 | ✅ | ✅ | 完全相同 |
| 分组功能 | ✅ | ✅ | 完全相同 |
| 液态玻璃UI | ✅ | ✅ | 完全相同 |
| 暗黑模式 | ✅ | ✅ | 完全相同 |
| 响应式设计 | ✅ | ✅ | 完全相同 |
| 数据导入导出 | ✅ | ✅ | 数据库版本更强大 |

## 🏗️ 技术架构对比

### Main 分支架构
```
前端 (React + Vite)
    ↓
Cloudflare Pages
    ↓
Cloudflare Workers (API)
    ↓
Cloudflare KV (存储)
```

### Serv00 分支架构
```
前端 (React + Vite)
    ↓
Serv00 静态托管
    ↓
PHP API (RESTful)
    ↓
MySQL/PostgreSQL 数据库
```

## 📊 详细对比

### 🗄️ 数据存储

#### Main 分支 (Cloudflare KV)
- **类型**：键值存储
- **限制**：100,000 读取/天，1,000 写入/天（免费）
- **延迟**：全球分布，低延迟
- **查询**：简单键值查询
- **事务**：不支持
- **关系**：不支持

#### Serv00 分支 (MySQL/PostgreSQL)
- **类型**：关系型数据库
- **限制**：无限制（在合理使用范围内）
- **延迟**：单一数据中心
- **查询**：复杂SQL查询
- **事务**：完全支持
- **关系**：完全支持

### 🔧 后端API

#### Main 分支 (Cloudflare Workers)
- **语言**：JavaScript/TypeScript
- **运行时**：V8 引擎
- **冷启动**：几乎无冷启动
- **扩展性**：自动扩展
- **限制**：CPU时间、内存限制

#### Serv00 分支 (PHP)
- **语言**：PHP 8.0+
- **运行时**：Apache/Nginx + PHP-FPM
- **冷启动**：传统服务器模式
- **扩展性**：固定资源
- **限制**：服务器资源限制

### 💰 成本分析

#### Main 分支成本
```
Cloudflare Pages: 免费
Cloudflare Workers: 
  - 免费：100,000 请求/天
  - 付费：$5/月起
Cloudflare KV:
  - 免费：100,000 读取/天，1,000 写入/天
  - 付费：$0.50/百万次操作
```

#### Serv00 分支成本
```
Serv00 主机: 完全免费
MySQL 数据库: 免费
PHP 运行环境: 免费
SSL 证书: 免费
总成本: $0
```

## 🚀 部署对比

### Main 分支部署
```bash
# 1. 配置 Cloudflare
# 2. 设置 KV 命名空间
# 3. 配置 Workers
# 4. 部署到 Pages
npm run deploy
```

### Serv00 分支部署
```bash
# 1. 配置数据库
# 2. 上传文件
# 3. 初始化数据库
./deploy-serv00-complete.sh
```

## 📈 性能对比

### Main 分支性能
- ✅ **全球CDN**：超快的静态资源加载
- ✅ **边缘计算**：API响应极快
- ❌ **KV延迟**：写入操作有延迟
- ❌ **查询限制**：复杂查询困难

### Serv00 分支性能
- ✅ **数据库查询**：复杂查询高效
- ✅ **事务支持**：数据一致性好
- ❌ **地理位置**：单一数据中心
- ❌ **资源限制**：共享主机资源

## 🔒 安全对比

### Main 分支安全
- ✅ **Cloudflare防护**：DDoS、WAF保护
- ✅ **边缘安全**：分布式安全
- ❌ **KV安全**：相对简单的访问控制

### Serv00 分支安全
- ✅ **数据库安全**：完整的用户权限系统
- ✅ **JWT认证**：标准化认证机制
- ❌ **服务器安全**：依赖主机提供商

## 🎯 选择建议

### 选择 Main 分支，如果您：
- 🌍 需要全球用户访问
- ⚡ 要求极低延迟
- 📊 数据量不大
- 💰 可以接受付费扩展
- 🔧 熟悉 Serverless 架构

### 选择 Serv00 分支，如果您：
- 💰 希望完全免费
- 🗄️ 需要复杂数据查询
- 📊 数据量较大
- 🔒 需要完整的用户管理
- 🔧 熟悉传统 LAMP 架构

## 🔄 迁移指南

### 从 Main 到 Serv00
1. 导出 Cloudflare KV 数据
2. 转换数据格式
3. 导入到 MySQL 数据库
4. 更新 API 调用
5. 重新部署

### 从 Serv00 到 Main
1. 导出 MySQL 数据
2. 转换为 KV 格式
3. 导入到 Cloudflare KV
4. 更新 Workers 代码
5. 重新部署

## 📝 总结

两个分支都提供完整的环境管理功能，主要区别在于：

- **Main 分支**：现代化 Serverless 架构，全球分布，适合高并发场景
- **Serv00 分支**：传统 LAMP 架构，完全免费，适合个人和小团队使用

选择哪个分支取决于您的具体需求、技术偏好和预算考虑。两个分支都会持续维护和更新。
