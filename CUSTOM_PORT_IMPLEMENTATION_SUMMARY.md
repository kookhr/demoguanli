# ğŸŒ Serv00 ç¯å¢ƒç®¡ç†ç³»ç»Ÿ - è‡ªå®šä¹‰ç«¯å£é…ç½®å®ç°æ€»ç»“

## ğŸ“‹ å®ç°æ¦‚è¿°

å·²æˆåŠŸä¸º Serv00 ç¯å¢ƒç®¡ç†ç³»ç»Ÿå®ç°äº†å®Œæ•´çš„è‡ªå®šä¹‰ç«¯å£é…ç½®åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç«¯å£éªŒè¯ã€å ç”¨æ£€æŸ¥ã€æ™ºèƒ½å»ºè®®å’Œæ›´æ–°æ¨¡å¼å…¼å®¹ç­‰ç‰¹æ€§ã€‚

---

## âœ… å®Œæˆçš„åŠŸèƒ½

### 1. ğŸ”§ éƒ¨ç½²è„šæœ¬å¢å¼º (interactive-install.sh)

**æ–°å¢åŠŸèƒ½**ï¼š
- âœ… ç«¯å£éªŒè¯å‡½æ•° (`validate_port`)
- âœ… ç«¯å£å ç”¨æ£€æŸ¥ (`check_port_available`)
- âœ… æ™ºèƒ½ç«¯å£å»ºè®® (`suggest_available_port`)
- âœ… FreeBSD å…¼å®¹çš„ç«¯å£æ£€æµ‹ï¼ˆnetstat + sockstatï¼‰
- âœ… äº¤äº’å¼ç«¯å£é…ç½®æ”¶é›†
- âœ… ç«¯å£å†²çªè§£å†³æœºåˆ¶

**ä¿®æ”¹çš„å‡½æ•°**ï¼š
```bash
# æ–°å¢ç«¯å£éªŒè¯å’Œæ£€æŸ¥å‡½æ•°
validate_port()           # éªŒè¯ç«¯å£èŒƒå›´ 1024-65535
check_port_available()    # æ£€æŸ¥ç«¯å£å ç”¨çŠ¶æ€
suggest_available_port()  # æ™ºèƒ½ç«¯å£å»ºè®®

# å¢å¼ºçš„é…ç½®å‡½æ•°
load_existing_config()    # æ”¯æŒç«¯å£é…ç½®åŠ è½½
collect_fresh_config()    # äº¤äº’å¼ç«¯å£é…ç½®
generate_configuration_files()  # ç«¯å£å†™å…¥é…ç½®æ–‡ä»¶
```

### 2. ğŸ“ é…ç½®æ–‡ä»¶æ›´æ–°

**demo-config.json å¢å¼º**ï¼š
```json
{
  "deployment": {
    "platform": "serv00",
    "domain": "your-domain.serv00.net",
    "port": 8080,  // æ–°å¢ç«¯å£é…ç½®
    "installedAt": "2025-01-10T10:00:00Z"
  }
}
```

**start-server.sh å¢å¼º**ï¼š
- âœ… è‡ªåŠ¨è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£
- âœ… ç«¯å£éªŒè¯å’Œå ç”¨æ£€æŸ¥
- âœ… æ™ºèƒ½ç«¯å£æŸ¥æ‰¾å’Œåˆ‡æ¢
- âœ… FreeBSD ç¯å¢ƒä¼˜åŒ–

### 3. ğŸ”„ æ›´æ–°æ¨¡å¼å…¼å®¹

**é…ç½®ä¿ç•™æœºåˆ¶**ï¼š
- âœ… ä»ç°æœ‰ `demo-config.json` è¯»å–ç«¯å£é…ç½®
- âœ… ç«¯å£æœ‰æ•ˆæ€§éªŒè¯
- âœ… ç”¨æˆ·ç¡®è®¤ä¿®æ”¹é€‰é¡¹
- âœ… é…ç½®ä¸€è‡´æ€§æ£€æŸ¥

**æ—§ç‰ˆæœ¬è¿ç§»**ï¼š
- âœ… æ£€æµ‹å¹¶è¿ç§»æ—§é…ç½®æ–‡ä»¶
- âœ… é…ç½®æ ¼å¼è½¬æ¢
- âœ… å¤‡ä»½åŸå§‹é…ç½®

### 4. ğŸ§ª æµ‹è¯•å’ŒéªŒè¯

**æµ‹è¯•è„šæœ¬**ï¼š
- âœ… `test-port-config.sh` - ç«¯å£åŠŸèƒ½æµ‹è¯•
- âœ… `update-port-config.sh` - ç«¯å£é…ç½®æ›´æ–°
- âœ… å…¨é¢çš„åŠŸèƒ½éªŒè¯

**æµ‹è¯•è¦†ç›–**ï¼š
- âœ… ç«¯å£éªŒè¯å‡½æ•°æµ‹è¯•
- âœ… ç«¯å£å ç”¨æ£€æŸ¥æµ‹è¯•
- âœ… é…ç½®æ–‡ä»¶è¯»å†™æµ‹è¯•
- âœ… å¯åŠ¨è„šæœ¬é€»è¾‘æµ‹è¯•
- âœ… ç¯å¢ƒå˜é‡é…ç½®æµ‹è¯•

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å…¨æ–°å®‰è£…

```bash
# ä¸€é”®éƒ¨ç½²ï¼Œæ”¯æŒè‡ªå®šä¹‰ç«¯å£
bash -i <(curl -SL https://raw.githubusercontent.com/kookhr/demoguanli/serv00/interactive-install.sh)

# åœ¨é…ç½®é˜¶æ®µè¾“å…¥è‡ªå®šä¹‰ç«¯å£
è¯·è¾“å…¥æœåŠ¡ç«¯å£ (1024-65535) [é»˜è®¤: 3000]: 8080
```

### æ›´æ–°ç°æœ‰å®‰è£…

```bash
# æ›´æ–°æ¨¡å¼ä¼šè‡ªåŠ¨ä¿ç•™ç°æœ‰ç«¯å£é…ç½®
bash -i <(curl -SL https://raw.githubusercontent.com/kookhr/demoguanli/serv00/interactive-install.sh)

# æ˜¾ç¤ºå½“å‰é…ç½®ï¼ŒåŒ…æ‹¬ç«¯å£
--- å½“å‰é…ç½® ---
åŸŸå: your-domain.serv00.net
æœåŠ¡ç«¯å£: 8080
------------------
```

### æ‰‹åŠ¨ç«¯å£é…ç½®

```bash
# ä½¿ç”¨ç«¯å£é…ç½®æ›´æ–°è„šæœ¬
./update-port-config.sh /path/to/install/dir 9000

# ç›´æ¥ç¼–è¾‘é…ç½®æ–‡ä»¶
vim demo-config.json
```

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### ç«¯å£éªŒè¯é€»è¾‘

```bash
validate_port() {
    local port="$1"
    
    # æ£€æŸ¥æ•°å­—æ ¼å¼
    if ! [[ "$port" =~ ^[0-9]+$ ]]; then
        return 1
    fi
    
    # æ£€æŸ¥ç«¯å£èŒƒå›´ (1024-65535)
    if [ "$port" -lt 1024 ] || [ "$port" -gt 65535 ]; then
        return 1
    fi
    
    return 0
}
```

### FreeBSD ç«¯å£æ£€æŸ¥

```bash
check_port_available() {
    local port="$1"
    
    # netstat æ£€æŸ¥ (é€šç”¨)
    if netstat -tuln 2>/dev/null | grep -q ":$port "; then
        return 1
    fi
    
    # sockstat æ£€æŸ¥ (FreeBSD ç‰¹æœ‰)
    if sockstat -l | grep -q ":$port "; then
        return 1
    fi
    
    return 0
}
```

### æ™ºèƒ½ç«¯å£å»ºè®®

```bash
suggest_available_port() {
    local start_port="$1"
    local max_attempts=20
    
    for ((i=0; i<max_attempts; i++)); do
        local test_port=$((start_port + i))
        
        if check_port_available "$test_port"; then
            echo "$test_port"
            return 0
        fi
    done
}
```

---

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°çš„ç‰¹æ€§

1. **ç«¯å£éªŒè¯**
   - èŒƒå›´æ£€æŸ¥ (1024-65535)
   - æ ¼å¼éªŒè¯ (çº¯æ•°å­—)
   - FreeBSD å…¼å®¹æ€§

2. **ç«¯å£å ç”¨æ£€æŸ¥**
   - netstat æ£€æŸ¥
   - sockstat æ£€æŸ¥ (FreeBSD)
   - nc è¿æ¥æµ‹è¯• (å¤‡ç”¨)

3. **æ™ºèƒ½ç«¯å£ç®¡ç†**
   - è‡ªåŠ¨ç«¯å£å»ºè®®
   - å†²çªè§£å†³æœºåˆ¶
   - ç”¨æˆ·äº¤äº’ç¡®è®¤

4. **é…ç½®ç®¡ç†**
   - é…ç½®æ–‡ä»¶è¯»å†™
   - æ›´æ–°æ¨¡å¼ä¿ç•™
   - ä¸€è‡´æ€§éªŒè¯

5. **FreeBSD ä¼˜åŒ–**
   - ç³»ç»Ÿå·¥å…·å…¼å®¹
   - ç¯å¢ƒç‰¹å®šæ£€æŸ¥
   - æ€§èƒ½ä¼˜åŒ–

### ğŸ”„ æ›´æ–°æ¨¡å¼ç‰¹æ€§

1. **é…ç½®ä¿ç•™**
   - è‡ªåŠ¨è¯»å–ç°æœ‰ç«¯å£
   - éªŒè¯é…ç½®æœ‰æ•ˆæ€§
   - ç”¨æˆ·ç¡®è®¤æœºåˆ¶

2. **é…ç½®è¿ç§»**
   - æ—§ç‰ˆæœ¬å…¼å®¹
   - æ ¼å¼è½¬æ¢
   - å¤‡ä»½ä¿æŠ¤

3. **ä¸€è‡´æ€§æ£€æŸ¥**
   - å¤šæ–‡ä»¶é…ç½®åŒæ­¥
   - å†²çªæ£€æµ‹
   - è‡ªåŠ¨ä¿®å¤

---

## ğŸ“ ç”Ÿæˆçš„æ–‡ä»¶

1. **interactive-install.sh** - å¢å¼ºçš„éƒ¨ç½²è„šæœ¬
2. **test-port-config.sh** - ç«¯å£é…ç½®æµ‹è¯•è„šæœ¬
3. **update-port-config.sh** - ç«¯å£é…ç½®æ›´æ–°è„šæœ¬
4. **PORT_CONFIGURATION_GUIDE.md** - ç«¯å£é…ç½®ä½¿ç”¨æŒ‡å—
5. **CUSTOM_PORT_IMPLEMENTATION_SUMMARY.md** - å®ç°æ€»ç»“æ–‡æ¡£

---

## ğŸ¯ éªŒè¯ç»“æœ

### æµ‹è¯•é€šè¿‡æƒ…å†µ

```bash
âœ… ç«¯å£éªŒè¯å‡½æ•°æµ‹è¯•é€šè¿‡
âœ… ç«¯å£å ç”¨æ£€æŸ¥æµ‹è¯•é€šè¿‡
âœ… é…ç½®æ–‡ä»¶è¯»å–æµ‹è¯•é€šè¿‡
âœ… å¯åŠ¨è„šæœ¬é€»è¾‘æµ‹è¯•é€šè¿‡
âœ… ç¯å¢ƒå˜é‡é…ç½®æµ‹è¯•é€šè¿‡
```

### å…¼å®¹æ€§éªŒè¯

- âœ… **FreeBSD ç¯å¢ƒ**: å®Œå…¨å…¼å®¹
- âœ… **Serv00 å¹³å°**: ä¼˜åŒ–é€‚é…
- âœ… **æ›´æ–°æ¨¡å¼**: é…ç½®ä¿ç•™æ­£å¸¸
- âœ… **å…¨æ–°å®‰è£…**: åŠŸèƒ½å®Œæ•´

---

## ğŸ”® åç»­å»ºè®®

### 1. ç›‘æ§å’Œç»´æŠ¤

```bash
# å®šæœŸè¿è¡Œç«¯å£é…ç½®æµ‹è¯•
./test-port-config.sh

# ç›‘æ§æœåŠ¡çŠ¶æ€
ps aux | grep serve
sockstat -l | grep :PORT
```

### 2. å®‰å…¨è€ƒè™‘

- ğŸ”’ é¿å…ä½¿ç”¨é»˜è®¤ç«¯å£ (3000, 8080)
- ğŸ›¡ï¸ ç¡®ä¿é˜²ç«å¢™æ­£ç¡®é…ç½®
- ğŸ“ è®°å½•ç«¯å£ä½¿ç”¨æƒ…å†µ

### 3. æ‰©å±•åŠŸèƒ½

- ğŸŒ æ”¯æŒå¤šç«¯å£é…ç½®
- ğŸ“Š ç«¯å£ä½¿ç”¨ç»Ÿè®¡
- ğŸ”„ è‡ªåŠ¨ç«¯å£è½®æ¢

---

## ğŸ‰ æ€»ç»“

è‡ªå®šä¹‰ç«¯å£é…ç½®åŠŸèƒ½å·²å®Œå…¨å®ç°å¹¶é€šè¿‡æµ‹è¯•ï¼Œæä¾›äº†ï¼š

- âœ… **å®Œæ•´çš„ç«¯å£ç®¡ç†åŠŸèƒ½**
- âœ… **FreeBSD/Serv00 ç¯å¢ƒä¼˜åŒ–**
- âœ… **æ›´æ–°æ¨¡å¼é…ç½®ä¿ç•™**
- âœ… **æ™ºèƒ½å†²çªè§£å†³æœºåˆ¶**
- âœ… **å…¨é¢çš„æµ‹è¯•éªŒè¯**

ç³»ç»Ÿç°åœ¨å¯ä»¥åœ¨ Serv00 å¹³å°ä¸Šçµæ´»é…ç½®å’Œä½¿ç”¨è‡ªå®šä¹‰ç«¯å£ï¼Œç¡®ä¿æœåŠ¡çš„ç¨³å®šè¿è¡Œå’Œç”¨æˆ·çš„ä¾¿æ·ä½“éªŒã€‚

---

**ğŸ“… å®ç°å®Œæˆæ—¶é—´**: 2025-01-10  
**ğŸ”„ ç‰ˆæœ¬**: v2.0.0  
**ğŸŒ å¹³å°**: Serv00 FreeBSD  
**ğŸ‘¨â€ğŸ’» å¼€å‘è€…**: Augment Agent
